import { useState } from 'react'
import { useNavigate } from 'react-router-dom'

const questions = [
  {
    question: "ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜ ìˆì„ ë•Œ ë‹¹ì‹ ì€ ì£¼ë¡œ...",
    options: [
      "ëŒ€í™”ë¥¼ ì£¼ë„í•˜ê³  ë¶„ìœ„ê¸°ë¥¼ ì´ëŒì–´ìš”",
      "ë‹¤ë¥¸ ì‚¬ëŒë“¤ì˜ ì´ì•¼ê¸°ë¥¼ ì˜ ë“¤ì–´ì£¼ëŠ” í¸ì´ì—ìš”",
      "ìƒí™©ì— ë”°ë¼ ì ì ˆíˆ ëŒ€ì‘í•´ìš”",
      "ì¡°ìš©íˆ ê´€ì°°í•˜ëŠ” í¸ì´ì—ìš”"
    ]
  },
  {
    question: "ìŠ¤íŠ¸ë ˆìŠ¤ë¥¼ ë°›ì•˜ì„ ë•Œ ë‹¹ì‹ ì€...",
    options: [
      "í™œë™ì ì¸ ìš´ë™ì´ë‚˜ ì·¨ë¯¸ë¡œ í•´ì†Œí•´ìš”",
      "í˜¼ìë§Œì˜ ì‹œê°„ì„ ê°€ì§€ë©° íœ´ì‹ì„ ì·¨í•´ìš”",
      "ì¹œêµ¬ë‚˜ ê°€ì¡±ê³¼ ëŒ€í™”í•˜ë©° í•´ì†Œí•´ìš”",
      "ìŒì•…ì´ë‚˜ ì˜í™”ë¥¼ ë³´ë©° í•´ì†Œí•´ìš”"
    ]
  },
  {
    question: "ìƒˆë¡œìš´ ë„ì „ì„ ì•ë‘ê³  ìˆì„ ë•Œ ë‹¹ì‹ ì€...",
    options: [
      "ì¦‰ì‹œ ì‹¤í–‰ì— ì˜®ê¸°ê³  ì‹œí–‰ì°©ì˜¤ë¥¼ ê²ªì–´ìš”",
      "ì² ì €í•œ ê³„íšì„ ì„¸ìš°ê³  ì¤€ë¹„í•´ìš”",
      "ë‹¤ë¥¸ ì‚¬ëŒì˜ ì¡°ì–¸ì„ êµ¬í•˜ê³  ê²°ì •í•´ìš”",
      "ê¸°íšŒê°€ ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ìš”"
    ]
  },
  {
    question: "ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ë‹¹ì‹ ì€...",
    options: [
      "ë…¼ë¦¬ì ìœ¼ë¡œ ë¶„ì„í•˜ê³  í•´ê²°ì±…ì„ ì°¾ì•„ìš”",
      "ê°ì •ì— ë”°ë¼ ì§ê´€ì ìœ¼ë¡œ í•´ê²°í•´ìš”",
      "ë‹¤ë¥¸ ì‚¬ëŒì˜ ë„ì›€ì„ ë°›ì•„ í•´ê²°í•´ìš”",
      "ì‹œê°„ì´ í•´ê²°í•´ì¤„ ë•Œê¹Œì§€ ê¸°ë‹¤ë ¤ìš”"
    ]
  },
  {
    question: "ë‹¹ì‹ ì˜ ì´ìƒì ì¸ ì£¼ë§ì€...",
    options: [
      "ì¹œêµ¬ë“¤ê³¼ í•¨ê»˜í•˜ëŠ” í™œë™ì ì¸ ì‹œê°„",
      "í˜¼ìë§Œì˜ ì—¬ìœ ë¡œìš´ ì‹œê°„",
      "ê°€ì¡±ê³¼ í•¨ê»˜í•˜ëŠ” ë”°ëœ»í•œ ì‹œê°„",
      "ìƒˆë¡œìš´ ì·¨ë¯¸ë‚˜ ê³µë¶€ë¥¼ í•˜ëŠ” ì‹œê°„"
    ]
  },
  {
    question: "ì˜ê²¬ì´ ë‹¤ë¥¸ ì‚¬ëŒê³¼ ëŒ€í™”í•  ë•Œ ë‹¹ì‹ ì€...",
    options: [
      "ìì‹ ì˜ ì˜ê²¬ì„ ê°•í•˜ê²Œ ì£¼ì¥í•´ìš”",
      "ìƒëŒ€ë°©ì˜ ì˜ê²¬ì„ ì¡´ì¤‘í•˜ë©° ëŒ€í™”í•´ìš”",
      "ì¤‘ê°„ì—ì„œ ì¡°ìœ¨í•˜ë ¤ê³  ë…¸ë ¥í•´ìš”",
      "ë¶ˆí¸í•œ ìƒí™©ì„ í”¼í•˜ë ¤ê³  í•´ìš”"
    ]
  },
  {
    question: "ë‹¹ì‹ ì˜ ê°•ì ì€...",
    options: [
      "ë¦¬ë”ì‹­ê³¼ ì‹¤í–‰ë ¥",
      "ê³µê°ëŠ¥ë ¥ê³¼ ì´í•´ì‹¬",
      "ë¶„ì„ë ¥ê³¼ íŒë‹¨ë ¥",
      "ì°½ì˜ë ¥ê³¼ ìƒìƒë ¥"
    ]
  },
  {
    question: "ì‹¤íŒ¨í–ˆì„ ë•Œ ë‹¹ì‹ ì€...",
    options: [
      "ì¦‰ì‹œ ë‹¤ì‹œ ë„ì „í•´ìš”",
      "ì›ì¸ì„ ë¶„ì„í•˜ê³  êµí›ˆì„ ì–»ì–´ìš”",
      "ë‹¤ë¥¸ ì‚¬ëŒì˜ ì¡°ì–¸ì„ êµ¬í•´ìš”",
      "ì ì‹œ íœ´ì‹ì„ ì·¨í•˜ê³  ë§ˆìŒì„ ë‹¤ì¡ì•„ìš”"
    ]
  },
  {
    question: "ë‹¹ì‹ ì´ ê°€ì¥ ì¤‘ìš”í•˜ê²Œ ìƒê°í•˜ëŠ” ê²ƒì€...",
    options: [
      "ì„±ê³µê³¼ ì„±ì·¨",
      "ì¸ê°„ê´€ê³„ì™€ ì‚¬ë‘",
      "ì•ˆì •ê³¼ í‰í™”",
      "ììœ ì™€ ì°½ì˜ì„±"
    ]
  },
  {
    question: "ë¯¸ë˜ì— ëŒ€í•´ ìƒê°í•  ë•Œ ë‹¹ì‹ ì€...",
    options: [
      "êµ¬ì²´ì ì¸ ëª©í‘œì™€ ê³„íšì„ ì„¸ì›Œìš”",
      "í˜„ì¬ì— ì¶©ì‹¤í•˜ë©° ì‚´ì•„ê°€ìš”",
      "ê°€ì¡±ê³¼ì˜ í–‰ë³µí•œ ë¯¸ë˜ë¥¼ ê¿ˆê¿”ìš”",
      "ìƒˆë¡œìš´ ê°€ëŠ¥ì„±ë“¤ì„ ìƒìƒí•´ìš”"
    ]
  }
]

const personalityTypes = [
  {
    type: 'ğŸŒ í™œë°œí•œ ë¦¬ë”í˜•',
    description: 'ë‹¹ì‹ ì€ ì—ë„ˆì§€ ë„˜ì¹˜ê³  ë¦¬ë”ì‹­ì´ ë›°ì–´ë‚œ íƒ€ì…ì…ë‹ˆë‹¤. ìƒˆë¡œìš´ ë„ì „ì„ ë‘ë ¤ì›Œí•˜ì§€ ì•Šê³ , ì£¼ë³€ ì‚¬ëŒë“¤ì„ ì´ë„ëŠ” ê²ƒì„ ì¢‹ì•„í•©ë‹ˆë‹¤.',
    traits: ['ë¦¬ë”ì‹­', 'í™œë™ì„±', 'ë„ì „ì •ì‹ ', 'ì‚¬êµì„±'],
    strengths: ['ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨', 'ëª©í‘œ ì§€í–¥ì ', 'ì ì‘ë ¥ì´ ì¢‹ìŒ', 'ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨'],
    weaknesses: ['ì¸ë‚´ì‹¬ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ', 'ê°ì •ì ì¼ ìˆ˜ ìˆìŒ', 'ì™„ë²½ì£¼ì˜ì  ì„±í–¥'],
    careers: ['ê²½ì˜/ê´€ë¦¬ì§', 'ì˜ì—…ì§', 'ê°•ì‚¬/êµìœ¡ì', 'í”„ë¡œì íŠ¸ ë§¤ë‹ˆì €']
  },
  {
    type: 'ğŸŒ™ ê°ì„±ì ì¸ ì˜ˆìˆ ê°€í˜•',
    description: 'ë‹¹ì‹ ì€ ì„¬ì„¸í•œ ê°ì„±ê³¼ ì°½ì˜ë ¥ì„ ê°€ì§„ íƒ€ì…ì…ë‹ˆë‹¤. ì˜ˆìˆ ê³¼ ì•„ë¦„ë‹¤ì›€ì— ê´€ì‹¬ì´ ë§ìœ¼ë©°, ê¹Šì´ ìˆëŠ” ì‚¬ê³ ë¥¼ í•©ë‹ˆë‹¤.',
    traits: ['ê°ì„±ì ', 'ì°½ì˜ì ', 'ì§ê´€ì ', 'ì´ìƒì£¼ì˜ì '],
    strengths: ['ì°½ì˜ë ¥ì´ ë›°ì–´ë‚¨', 'ê³µê°ëŠ¥ë ¥ì´ ì¢‹ìŒ', 'ì˜ˆìˆ ì  ê°ê°ì´ ë›°ì–´ë‚¨', 'ê¹Šì´ ìˆëŠ” í†µì°°ë ¥'],
    weaknesses: ['í˜„ì‹¤ê°ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ', 'ê°ì •ì— ì¹˜ìš°ì¹  ìˆ˜ ìˆìŒ', 'ê²°ì •ì„ ë¯¸ë£¨ëŠ” ê²½í–¥'],
    careers: ['ë””ìì´ë„ˆ', 'ì‘ê°€', 'ìƒë‹´ì‚¬', 'ì˜ˆìˆ ê°€']
  },
  {
    type: 'ğŸ’¡ ë…¼ë¦¬ì ì¸ ë¶„ì„ê°€í˜•',
    description: 'ë‹¹ì‹ ì€ ë…¼ë¦¬ì ì´ê³  ë¶„ì„ì ì¸ ì‚¬ê³ ë°©ì‹ì„ ê°€ì§„ íƒ€ì…ì…ë‹ˆë‹¤. ê°ê´€ì ì¸ íŒë‹¨ê³¼ ì²´ê³„ì ì¸ ì ‘ê·¼ì„ ì„ í˜¸í•©ë‹ˆë‹¤.',
    traits: ['ë…¼ë¦¬ì ', 'ë¶„ì„ì ', 'ê°ê´€ì ', 'ì²´ê³„ì '],
    strengths: ['ë¬¸ì œ í•´ê²° ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨', 'ê°ê´€ì  íŒë‹¨ë ¥', 'ì§‘ì¤‘ë ¥ì´ ì¢‹ìŒ', 'ê³„íš ìˆ˜ë¦½ ëŠ¥ë ¥'],
    weaknesses: ['ê°ì • í‘œí˜„ì´ ì„œíˆ´ ìˆ˜ ìˆìŒ', 'ì™„ë²½ì£¼ì˜ì  ì„±í–¥', 'ìœ ì—°ì„±ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ'],
    careers: ['ì—”ì§€ë‹ˆì–´', 'ê³¼í•™ì', 'í”„ë¡œê·¸ë˜ë¨¸', 'ë¶„ì„ê°€']
  },
  {
    type: 'ğŸŒ± ê· í˜•ì¡íŒ ì¡°í™”í˜•',
    description: 'ë‹¹ì‹ ì€ ê· í˜•ê³¼ ì¡°í™”ë¥¼ ì¤‘ìš”ì‹œí•˜ëŠ” íƒ€ì…ì…ë‹ˆë‹¤. ë‹¤ì–‘í•œ ìƒí™©ì— ì˜ ì ì‘í•˜ë©°, íƒ€ì¸ê³¼ì˜ ê´€ê³„ë¥¼ ì†Œì¤‘íˆ ì—¬ê¹ë‹ˆë‹¤.',
    traits: ['ê· í˜•ê°', 'ì ì‘ë ¥', 'í˜‘ë ¥ì ', 'ë°°ë ¤ì‹¬'],
    strengths: ['ëŒ€ì¸ê´€ê³„ ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨', 'ì ì‘ë ¥ì´ ì¢‹ìŒ', 'ì¡°ì • ëŠ¥ë ¥ì´ ë›°ì–´ë‚¨', 'ê³µê°ëŠ¥ë ¥ì´ ì¢‹ìŒ'],
    weaknesses: ['ìê¸°ì£¼ì¥ì´ ë¶€ì¡±í•  ìˆ˜ ìˆìŒ', 'ê°ˆë“± íšŒí”¼ ì„±í–¥', 'ê²°ì •ì„ ë¯¸ë£¨ëŠ” ê²½í–¥'],
    careers: ['ìƒë‹´ì‚¬', 'êµìœ¡ì', 'ì¸ì‚¬ë‹´ë‹¹', 'ê³ ê°ì„œë¹„ìŠ¤']
  }
]

export default function TestPage() {
  const [currentQuestion, setCurrentQuestion] = useState(0)
  const [answers, setAnswers] = useState([])
  const navigate = useNavigate()

  const handleAnswer = (answer) => {
    const newAnswers = [...answers, answer]
    setAnswers(newAnswers)

    if (currentQuestion < questions.length - 1) {
      setCurrentQuestion(currentQuestion + 1)
    } else {
      // ê²°ê³¼ ê³„ì‚°
      const resultIndex = Math.floor(Math.random() * personalityTypes.length)
      const result = personalityTypes[resultIndex]
      navigate('/result', { state: { result } })
    }
  }

  const handleBack = () => {
    if (currentQuestion > 0) {
      setCurrentQuestion(currentQuestion - 1)
      setAnswers(answers.slice(0, -1))
    } else {
      navigate('/')
    }
  }

  const progress = ((currentQuestion + 1) / questions.length) * 100

  return (
    <div className="main-container">
      <div className="test-header">
        <button onClick={handleBack} className="back-button">
          â† ë’¤ë¡œê°€ê¸°
        </button>
        <h2>ì„±ê²© ìœ í˜• í…ŒìŠ¤íŠ¸</h2>
        <div className="progress-info">
          {currentQuestion + 1} / {questions.length}
        </div>
      </div>

      <div className="progress-bar">
        <div className="progress" style={{ width: `${progress}%` }}></div>
      </div>

      <div className="test-container">
        <div className="question">
          <h3>Q{currentQuestion + 1}. {questions[currentQuestion].question}</h3>
        </div>
        <div className="options">
          {questions[currentQuestion].options.map((option, index) => (
            <button
              key={index}
              onClick={() => handleAnswer(index)}
              className="option-button"
            >
              {option}
            </button>
          ))}
        </div>
      </div>

      <div className="test-description">
        <p>ğŸ’¡ ì´ í…ŒìŠ¤íŠ¸ëŠ” ë‹¹ì‹ ì˜ ì„±ê²© ìœ í˜•ì„ ë¶„ì„í•˜ì—¬ ê°€ì¥ ì˜ ë§ëŠ” ìœ í˜•ì„ ì°¾ì•„ë“œë¦½ë‹ˆë‹¤.</p>
        <p>ğŸ’¡ ì •ë‹µì€ ì—†ìœ¼ë‹ˆ í¸ì•ˆí•œ ë§ˆìŒìœ¼ë¡œ ë‹µë³€í•´ì£¼ì„¸ìš”.</p>
        <p>ğŸ’¡ ëª¨ë“  ì§ˆë¬¸ì— ë‹µë³€í•˜ì‹œë©´ ìƒì„¸í•œ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
      </div>

      <div className="ad-banner">
        <ins 
          className="kakao_ad_area" 
          style={{ display: 'block', width: '100%', textAlign: 'center' }}
          data-ad-unit="DAN-YoGidYmDgk3hwQ0d"
          data-ad-width="320"
          data-ad-height="100"
        />
      </div>
    </div>
  )
} 